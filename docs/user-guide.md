# OpenFisca Editor ユーザーガイド

このガイドでは、OpenFisca Editor の基本的な使い方について説明します。

## 目次

- [ホーム画面](#ホーム画面)
- [制度の作成と編集](#制度の作成と編集)
- [テストケースの作成](#テストケースの作成)
- [コードエディタの使用](#コードエディタの使用)
- [パラメータの設定](#パラメータの設定)
- [シミュレーションの実行](#シミュレーションの実行)
- [フローチャートの表示](#フローチャートの表示)
- [制度の公開と共有](#制度の公開と共有)

## ホーム画面

アプリケーションを起動すると、ホーム画面が表示されます。サイドバーには既存の制度のリストが表示され、メインエリアには選択した制度の詳細が表示されます。

- **新しい制度を作成**: ホーム画面の「新しい制度を作成」ボタンをクリックします。
- **既存の制度を選択**: サイドバーの制度リストから選択します。
- **複数の制度を操作**: 「複数選択モード」ボタンをクリックし、複数の制度を選択して一括操作を行います。

## 制度の作成と編集

### 新しい制度の作成

1. ホーム画面の「新しい制度を作成」ボタンをクリックします。
2. 基本情報を入力します：
   - 制度名
   - 概要
   - 利用条件
   - 所管部署
   - 掲載URL
   - 申請先URL

### 制度の編集

制度を選択すると、制度の詳細情報を編集できます：

1. 制度名や説明などの基本情報の編集
2. 制度のコード編集（OpenFisca Python コード）
3. パラメータの設定
4. テストケースの作成

## テストケースの作成

テストケースパネルで、制度の動作をテストするためのケースを作成できます。

1. 「テストケース」タブを選択します。
2. 「新しいテストケースを追加」ボタンをクリックします。
3. テストケースの情報を入力します：
   - 親（扶養者）の人数
   - 祖父母の人数
   - 子供の人数
   - 支給額

テストケースは、制度が正しく機能しているかを検証するために使用されます。

## コードエディタの使用

コードエディタパネルでは、OpenFisca の Python コードを直接編集できます。

1. 「コードエディタ」タブを選択します。
2. 制度のコードを編集します。
3. 変更を保存するには「保存」ボタンをクリックします。

コードエディタは、制度のロジックを実装するために使用されます。「[OpenFisca 概念ガイド](./openfisca-concepts.md)」を参照して、コードの作成方法を学びましょう。

## パラメータの設定

パラメータパネルでは、制度のパラメータを設定できます。

1. 「パラメータ」タブを選択します。
2. 「新しいパラメータを追加」ボタンをクリックします。
3. パラメータの情報を入力します：
   - 名前
   - 説明
   - 参照
   - 単位
   - 値（日付ごとに異なる値を設定可能）

パラメータは、制度の計算に使用される値を定義します。

## シミュレーションの実行

シミュレーションパネルでは、制度のシミュレーションを実行して結果を確認できます。

1. 「シミュレーション」タブを選択します。
2. テストケースを選択するか、新しいケースを設定します。
3. 「シミュレーション実行」ボタンをクリックします。
4. 結果が表示されます。必要に応じてグラフや表で確認できます。

シミュレーションは、制度が実際にどのように機能するかを確認するために使用されます。

## フローチャートの表示

Mermaid パネルでは、制度のフローチャートを表示できます。

1. 「フローチャート」タブを選択します。
2. Mermaid コードを編集するか、自動生成されたコードを使用します。
3. フローチャートが表示されます。

フローチャートは、制度の流れを視覚的に理解するために使用されます。

## 制度の公開と共有

完成した制度は、公開して他のユーザーと共有できます。

1. 制度の詳細画面で「公開」ボタンをクリックします。
2. 公開範囲を選択します（プライベート、制限付き、公開）。
3. 「確認」ボタンをクリックして公開します。

公開した制度は、リンクを共有することで他のユーザーと共有できます。また、「エクスポート」ボタンをクリックして OpenFisca 形式でエクスポートすることもできます。

## キーボードショートカット

| 機能 | ショートカット |
|-----|-------------|
| 保存 | Ctrl+S（Windows/Linux）または Command+S（Mac） |
| コードのフォーマット | Alt+Shift+F |
| シミュレーション実行 | Ctrl+Enter |
| 新しいパラメータ追加 | Ctrl+Shift+P |
| 新しいテストケース追加 | Ctrl+Shift+T |

## トラブルシューティング

- **コードエラー**: コードエディタでエラーが表示される場合は、エラーメッセージを確認し、文法や変数名を修正してください。
- **シミュレーションエラー**: シミュレーションが失敗する場合は、テストケースの設定やコードの実装を確認してください。
- **保存エラー**: 変更が保存できない場合は、ブラウザのキャッシュをクリアするか、別のブラウザで試してください。

問題が解決しない場合は、[GitHub Issues](https://github.com/yourusername/openfisca-editor/issues) で報告してください。
